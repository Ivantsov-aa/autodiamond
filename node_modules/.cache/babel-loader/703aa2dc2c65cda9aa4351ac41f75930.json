{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alina\\\\front-end\\\\autodiamond\\\\src\\\\components\\\\catalog\\\\catalog.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport SearchForm from '../main/search-form';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst url = 'http://avd-backend.veon-tech.ru';\n\nconst Catalog = () => {\n  _s();\n\n  const [catalog, setCatalog] = useState([]);\n  useEffect(() => {\n    loadCarsBrandToCatalog();\n  }, []);\n\n  const loadCarsBrandToCatalog = async () => {\n    const headers = {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    };\n    await fetch(`${url}/api/cars/brands`, {\n      method: 'GET',\n      headers\n    }).then(response => response.json()).then(result => {\n      let urlModels = new URL(url + '/api/cars/models');\n      let catalogToState = [];\n      result.brands.forEach(brand => {\n        fetch(urlModels + '?brand=' + brand, {\n          method: 'GET',\n          headers\n        }).then(response => response.json()).then(result => {\n          catalogToState.push({\n            name: brand,\n            models: result.models\n          });\n          setCatalog([...catalog, ...catalogToState]);\n        });\n      });\n    });\n  };\n\n  console.log(catalog);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n      catalog: catalog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"catalog\",\n      children: catalog.length > 0 && catalog.map((brand, i) => {\n        let brandName = brand.name.split(' ').join('-');\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: `/catalog/${brandName.toLowerCase()}`,\n          className: \"catalog-product\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: brand.logo,\n            alt: \"brand-logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: brand.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: brand.models ? brand.models.map((model, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n              children: (i ? ', ' : '') + model\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 37\n            }, this)) : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 28\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Catalog, \"SNi30aoGXnasGFl1aP3N5IMJkN4=\");\n\n_c = Catalog;\nexport default Catalog;\n\nvar _c;\n\n$RefreshReg$(_c, \"Catalog\");","map":{"version":3,"names":["useEffect","useState","Link","SearchForm","url","Catalog","catalog","setCatalog","loadCarsBrandToCatalog","headers","fetch","method","then","response","json","result","urlModels","URL","catalogToState","brands","forEach","brand","push","name","models","console","log","length","map","i","brandName","split","join","toLowerCase","logo","model"],"sources":["C:/Users/alina/front-end/autodiamond/src/components/catalog/catalog.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport SearchForm from '../main/search-form';\r\n\r\nconst url = 'http://avd-backend.veon-tech.ru';\r\n\r\nconst Catalog = () => {\r\n    const [catalog, setCatalog] = useState([]);\r\n\r\n    useEffect(() => {\r\n        loadCarsBrandToCatalog();\r\n    }, [])\r\n\r\n    const loadCarsBrandToCatalog = async () => {\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n        };\r\n\r\n\r\n        await fetch(`${url}/api/cars/brands`, {\r\n            method: 'GET',\r\n            headers\r\n        })\r\n            .then(response => response.json())\r\n            .then(result => {\r\n                let urlModels = new URL(url + '/api/cars/models');\r\n                let catalogToState = [];\r\n\r\n                result.brands.forEach(brand => {\r\n                    fetch(urlModels + '?brand=' + brand, {\r\n                        method: 'GET',\r\n                        headers\r\n                    })\r\n                        .then(response => response.json())\r\n                        .then(result => {\r\n                            catalogToState.push({ name: brand, models: result.models });\r\n                            setCatalog([...catalog, ...catalogToState]);\r\n                        })\r\n                });\r\n            })\r\n    }\r\n\r\n    console.log(catalog);\r\n\r\n    return (\r\n        <>\r\n            <SearchForm catalog={catalog} />\r\n            <div className='catalog'>\r\n                {catalog.length > 0 && catalog.map((brand, i) => {\r\n                    let brandName = brand.name.split(' ').join('-');\r\n                    return <Link\r\n                        to={`/catalog/${brandName.toLowerCase()}`}\r\n                        className='catalog-product'\r\n                        key={i}\r\n                    >\r\n                        <img src={brand.logo} alt='brand-logo' />\r\n                        <h3>\r\n                            {brand.name}\r\n                        </h3>\r\n                        <p>\r\n                            {brand.models ?\r\n                                brand.models.map((model, i) => (\r\n                                    <span key={i}>{(i ? ', ' : '') + model}</span>\r\n                                ))\r\n                                :\r\n                                ''\r\n                            }\r\n                        </p>\r\n                    </Link>\r\n                })}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Catalog;"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,IAAT,QAAqB,kBAArB;AAEA,OAAOC,UAAP,MAAuB,qBAAvB;;;AAEA,MAAMC,GAAG,GAAG,iCAAZ;;AAEA,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAClB,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBN,QAAQ,CAAC,EAAD,CAAtC;EAEAD,SAAS,CAAC,MAAM;IACZQ,sBAAsB;EACzB,CAFQ,EAEN,EAFM,CAAT;;EAIA,MAAMA,sBAAsB,GAAG,YAAY;IACvC,MAAMC,OAAO,GAAG;MACZ,gBAAgB,kBADJ;MAEZ,UAAU;IAFE,CAAhB;IAMA,MAAMC,KAAK,CAAE,GAAEN,GAAI,kBAAR,EAA2B;MAClCO,MAAM,EAAE,KAD0B;MAElCF;IAFkC,CAA3B,CAAL,CAIDG,IAJC,CAIIC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAJhB,EAKDF,IALC,CAKIG,MAAM,IAAI;MACZ,IAAIC,SAAS,GAAG,IAAIC,GAAJ,CAAQb,GAAG,GAAG,kBAAd,CAAhB;MACA,IAAIc,cAAc,GAAG,EAArB;MAEAH,MAAM,CAACI,MAAP,CAAcC,OAAd,CAAsBC,KAAK,IAAI;QAC3BX,KAAK,CAACM,SAAS,GAAG,SAAZ,GAAwBK,KAAzB,EAAgC;UACjCV,MAAM,EAAE,KADyB;UAEjCF;QAFiC,CAAhC,CAAL,CAIKG,IAJL,CAIUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAJtB,EAKKF,IALL,CAKUG,MAAM,IAAI;UACZG,cAAc,CAACI,IAAf,CAAoB;YAAEC,IAAI,EAAEF,KAAR;YAAeG,MAAM,EAAET,MAAM,CAACS;UAA9B,CAApB;UACAjB,UAAU,CAAC,CAAC,GAAGD,OAAJ,EAAa,GAAGY,cAAhB,CAAD,CAAV;QACH,CARL;MASH,CAVD;IAWH,CApBC,CAAN;EAqBH,CA5BD;;EA8BAO,OAAO,CAACC,GAAR,CAAYpB,OAAZ;EAEA,oBACI;IAAA,wBACI,QAAC,UAAD;MAAY,OAAO,EAAEA;IAArB;MAAA;MAAA;MAAA;IAAA,QADJ,eAEI;MAAK,SAAS,EAAC,SAAf;MAAA,UACKA,OAAO,CAACqB,MAAR,GAAiB,CAAjB,IAAsBrB,OAAO,CAACsB,GAAR,CAAY,CAACP,KAAD,EAAQQ,CAAR,KAAc;QAC7C,IAAIC,SAAS,GAAGT,KAAK,CAACE,IAAN,CAAWQ,KAAX,CAAiB,GAAjB,EAAsBC,IAAtB,CAA2B,GAA3B,CAAhB;QACA,oBAAO,QAAC,IAAD;UACH,EAAE,EAAG,YAAWF,SAAS,CAACG,WAAV,EAAwB,EADrC;UAEH,SAAS,EAAC,iBAFP;UAAA,wBAKH;YAAK,GAAG,EAAEZ,KAAK,CAACa,IAAhB;YAAsB,GAAG,EAAC;UAA1B;YAAA;YAAA;YAAA;UAAA,QALG,eAMH;YAAA,UACKb,KAAK,CAACE;UADX;YAAA;YAAA;YAAA;UAAA,QANG,eASH;YAAA,UACKF,KAAK,CAACG,MAAN,GACGH,KAAK,CAACG,MAAN,CAAaI,GAAb,CAAiB,CAACO,KAAD,EAAQN,CAAR,kBACb;cAAA,UAAe,CAACA,CAAC,GAAG,IAAH,GAAU,EAAZ,IAAkBM;YAAjC,GAAWN,CAAX;cAAA;cAAA;cAAA;YAAA,QADJ,CADH,GAKG;UANR;YAAA;YAAA;YAAA;UAAA,QATG;QAAA,GAGEA,CAHF;UAAA;UAAA;UAAA;QAAA,QAAP;MAmBH,CArBsB;IAD3B;MAAA;MAAA;MAAA;IAAA,QAFJ;EAAA,gBADJ;AA6BH,CApED;;GAAMxB,O;;KAAAA,O;AAsEN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}